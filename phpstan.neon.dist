parameters:
  level: 8
  bootstrapFiles:
    - tests/prepend.php
  paths:
    - src
    - tests
  excludePaths:
    - tests/cms
    - vendor
  treatPhpDocTypesAsCertain: false
  reportUnmatchedIgnoredErrors: false
  ignoreErrors:
    # Defensive type checks that are intentional for runtime safety
    - identifier: function.alreadyNarrowedType
    - identifier: notIdentical.alwaysTrue
    - identifier: identical.alwaysFalse
    - identifier: booleanAnd.alwaysFalse
    # Null coalesce on known-existing keys is intentional defensive coding
    - identifier: nullCoalesce.offset
    # Isset on known-existing keys is intentional defensive coding
    - identifier: isset.offset
    # Unused closure variables in eval context are intentional (available to eval'd code)
    - identifier: closure.unusedUse
    # Template type resolution issues with pest expect() helper
    - identifier: argument.templateType
    # Return type mismatches where we're returning dynamic arrays
    - identifier: return.type
    # Unused return types that are documented for interface consistency
    - identifier: return.unusedType
    # Method/property not found on external SDK types (MCP SDK, Kirby)
    - identifier: method.notFound
    - identifier: property.notFound
    # Offset access on dynamic arrays in tests
    - identifier: offsetAccess.notFound
    - identifier: offsetAccess.nonOffsetAccessible
    # Missing type annotations on array return types/parameters
    - identifier: missingType.iterableValue
    # Redundant array_values on lists
    - identifier: arrayValues.list
    # Dynamic regex patterns that PHPStan can't fully analyze
    - identifier: regexp.pattern
